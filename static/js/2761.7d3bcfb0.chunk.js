"use strict";(self.webpackChunksmart_light_bulbs=self.webpackChunksmart_light_bulbs||[]).push([[2761],{9503:function(t,n,e){e.d(n,{a:function(){return d},b:function(){return g},c:function(){return l},s:function(){return c}});var r=e(3433),i=e(7142),a=e(553),o=e(7671),u=e(2669),s=e(7775),f=e(6591),c=function(t){return function(n,e){return null==n.point&&null==e.point?0:null==n.point?-1:null==e.point?1:t(n.point)===t(e.point)?0:t(e.point)>t(n.point)?1:-1}},l=function(t,n,e,r){var i=o.p.left(t,n),a=t[i-1],u=t[i];if(a&&a.x===n.getTime())return a;if(u&&u.x===n.getTime())return u;if(e===s.D.RIGHT){if(!u)return;return null==r||u.x-n.getTime()<=r?u:void 0}if(e===s.D.LEFT){if(!a)return;return null==r||n.getTime()-a.x<=r?a:void 0}return a&&u?u:a||u},d=function(t){var n=t.viewport,e=t.dataStreams,r=t.selectedDate,i=t.allowMultipleDates,a=t.dataAlignment,s=t.maxDurationFromDate,f=e.map((function(t){return{streamId:t.id,dataPoints:(0,o.g)((0,u.g)(t,t.resolution),n.end)}})),d=r.getTime(),h=f.map((function(t){var n=t.streamId,e=t.dataPoints;return{streamId:n,point:l(e,r,a,s)}}));if(i)return h;var v=h.sort(c((function(t){return Math.abs(t.x-d)})));if(0===v.length)return[];var g=v[v.length-1].point;return null==g?v:v.filter((function(t){return t.point&&t.point.x===g.x}))},h=function(t,n){return null==t?n:null==t.severity&&null==n.severity?t:null==t.severity?n:null==n.severity||t.severity<=n.severity?t:n},v=function(t,n){var e=t.dataStreamIds;return null==e||e.includes(n)},g=function(t){var n=t.value,e=t.date,o=t.thresholds,u=t.dataStreams,c=t.dataStream,d=o.filter((function(t){return v(t,c.id)})),g=null!=n?(0,i.g)(n,d):void 0,m=function(t){var n=t.date,e=t.dataStream,r=t.dataStreams,o=t.thresholds,u=null!=e.associatedStreams?e.associatedStreams.filter((function(t){return t.type===f.S.ALARM})).map((function(t){return t.id})):[];return r.filter((function(t){return u.includes(t.id)})).map((function(t){var e=o.filter((function(n){return v(n,t.id)})),r=l(t.data,n,s.D.LEFT);return null!=r?(0,i.g)(r.y,e):void 0})).filter(a.c)}({date:e,dataStream:c,dataStreams:u,thresholds:o});return function(t){return t.reduce(h,void 0)}([g].concat((0,r.Z)(m)).filter(a.c))}},8627:function(t,n,e){e.d(n,{D:function(){return x},l:function(){return T}});var r=e(8828),i=e(8858),a="Expected a function",o=NaN,u="[object Symbol]",s=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,d=parseInt,h="object"==typeof r.b&&r.b&&r.b.Object===Object&&r.b,v="object"==typeof self&&self&&self.Object===Object&&self,g=h||v||Function("return this")(),m=Object.prototype.toString,p=Math.max,w=Math.min,b=function(){return g.Date.now()};function y(t,n,e){var r,i,o,u,s,f,c=0,l=!1,d=!1,h=!0;if("function"!=typeof t)throw new TypeError(a);function v(n){var e=r,a=i;return r=i=void 0,c=n,u=t.apply(a,e)}function g(t){var e=t-f;return void 0===f||e>=n||e<0||d&&t-c>=o}function m(){var t=b();if(g(t))return y(t);s=setTimeout(m,function(t){var e=n-(t-f);return d?w(e,o-(t-c)):e}(t))}function y(t){return s=void 0,h&&r?v(t):(r=i=void 0,u)}function T(){var t=b(),e=g(t);if(r=arguments,i=this,f=t,e){if(void 0===s)return function(t){return c=t,s=setTimeout(m,n),l?v(t):u}(f);if(d)return s=setTimeout(m,n),v(f)}return void 0===s&&(s=setTimeout(m,n)),u}return n=S(n)||0,D(e)&&(l=!!e.leading,o=(d="maxWait"in e)?p(S(e.maxWait)||0,n):o,h="trailing"in e?!!e.trailing:h),T.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=f=i=s=void 0},T.flush=function(){return void 0===s?u:y(b())},T}function D(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function S(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&m.call(t)==u}(t))return o;if(D(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=D(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(s,"");var e=c.test(t);return e||l.test(t)?d(t.slice(2),e?2:8):f.test(t)?o:+t}var T=function(t,n,e){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(a);return D(e)&&(r="leading"in e?!!e.leading:r,i="trailing"in e?!!e.trailing:i),y(t,n,{leading:r,maxWait:n,trailing:i})},x=.5*i.S},4832:function(t,n,e){e.d(n,{c:function(){return o},f:function(){return u}});var r=e(3433),i=e(9503),a=e(2669),o=function(t){for(var n=t.tableColumns,e=t.dataStreams,o=t.thresholds,u=t.date,s=Math.max.apply(Math,(0,r.Z)(n.map((function(t){return t.rows.length})))),f=[],c=function(t){var r={};n.forEach((function(n){var s=n.rows[t]||void 0;r[n.header]=function(t,n,e,r){var o=e.find((function(t){return t.id===r})),u=o?(0,a.g)(o,o.resolution):[],s=u[u.length-1]&&u[u.length-1].y,f=o&&(0,i.b)({value:s,date:n,dataStreams:e,dataStream:o,thresholds:t})||{};return{dataStream:o,color:f.color,icon:f.icon}}(o,u,e,s)})),f.push(r)},l=0;l<s;l++)c(l);return f},u=function(t){var n=t.indexOf(". ");return n<0?{msgHeader:t,msgSubHeader:""}:{msgHeader:t.slice(0,n),msgSubHeader:t.slice(n+2)}}},7671:function(t,n,e){e.d(n,{a:function(){return o},g:function(){return u},p:function(){return a}});var r=e(553),i=e(8858),a=(0,e(5166).b)((function(t){return t.x})),o=function(t,n){var e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=(0,r.a)(n)?new Date(n.start):new Date(Date.now()-(0,i.p)(n.duration)),u=(0,r.a)(n)?new Date(n.end):new Date;if(0===t.length)return[];if(o.getTime()>t[t.length-1].x)return[];if(u.getTime()<t[0].x)return[];var s=Math.max(a.left(t,o)-(e?1:0),0),f=Math.min(a.right(t,u)-(e?0:1),t.length-1);return t.slice(s,f+1)},u=function(t,n){if(0===t.length)return[];if(n.getTime()<t[0].x)return[];var e=Math.min(a.right(t,n)-1,t.length-1);return t.slice(0,e+1)}},2761:function(t,n,e){e.r(n),e.d(n,{sc_table:function(){return v}});var r=e(9439),i=e(5671),a=e(3144),o=e(8427),u=e(8627),s=e(7142),f=e(4832),c=e(2010),l=e(553),d=e(8858),h=e(4231),v=(e(8828),e(7775),e(9503),e(7671),e(6591),e(339),e(8134),function(){function t(n){var e=this;(0,i.Z)(this,t),(0,o.r)(this,n),this.dateRangeChange=(0,o.c)(this,"dateRangeChange",7),this.messageOverrides={},this.start=(0,c.v)(this.viewport),this.end=(0,c.a)(this.viewport),this.duration=(0,l.a)(this.viewport)?void 0:(0,d.p)(this.viewport.duration),this.onUpdate=function(t){var n=t.start,r=t.end,i=t.duration,a=(0,c.v)(e.viewport).getTime()!==n.getTime()||(0,c.a)(e.viewport).getTime()!==r.getTime(),o=(0,c.i)(e.viewport);a&&!o&&e.onDateRangeChange([n,r,e.viewport.group]),e.start=n,e.end=r,e.duration=i},this.onDateRangeChange=(0,u.l)((function(t){var n=(0,r.Z)(t,3),i=n[0],a=n[1],o=n[2];e.dateRangeChange.emit([i,a,o])}),u.D,{leading:!0,trailing:!0}),this.getThresholds=function(){return e.annotations&&e.annotations.y?e.annotations.y.filter(s.i):[]}}return(0,a.Z)(t,[{key:"onViewPortChange",value:function(t){this.onUpdate(Object.assign(Object.assign({},t),{duration:(0,l.a)(t)?void 0:(0,d.p)(t.duration),start:(0,c.v)(this.viewport),end:(0,c.a)(this.viewport)}))}},{key:"componentDidLoad",value:function(){h.w.addChartScene({manager:{id:this.widgetId,viewportGroup:this.viewport.group,updateViewPort:this.onUpdate},duration:this.duration})}},{key:"disconnectedCallback",value:function(){h.w.removeChartScene(this.widgetId)}},{key:"render",value:function(){var t=(0,f.c)({tableColumns:this.tableColumns,dataStreams:this.dataStreams,thresholds:this.getThresholds(),date:this.end}),n=null!=this.duration;return(0,o.h)("sc-table-base",{columns:this.tableColumns,rows:t,isEnabled:n,messageOverrides:this.messageOverrides})}}],[{key:"watchers",get:function(){return{viewport:["onViewPortChange"]}}}]),t}())},2010:function(t,n,e){e.d(n,{a:function(){return o},i:function(){return u},v:function(){return a}});var r=e(553),i=e(8858),a=function(t){return(0,r.a)(t)?new Date(t.start):new Date(Date.now()-(0,i.p)(t.duration))},o=function(t){return(0,r.a)(t)?new Date(t.end):new Date(Date.now())},u=function(t){return!(0,r.a)(t)&&Boolean(t.duration)}}}]);
//# sourceMappingURL=2761.7d3bcfb0.chunk.js.map