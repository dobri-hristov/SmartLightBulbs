"use strict";(self.webpackChunksmart_light_bulbs=self.webpackChunksmart_light_bulbs||[]).push([[3639],{775:function(t,e,a){a.d(e,{H:function(){return h},S:function(){return c},c:function(){return m},u:function(){return g}});var r=a(9439),n=a(8134),o=a(7411),i=(a(339),a(7142)),s=a(3141),h=1,c=33.5,u=[213,219,219],l=[135,149,150],d=function(t){var e=t.dataStreams,a=t.mesh,n=t.toClipSpace,d=t.thresholds,f=t.thresholdOptions,p=t.chartSize,m=t.alarms,g=e.map((function(t){return(0,o.v)(t,t.resolution)}));a.count=function(t){return t.reduce((function(t,e){return t+Math.max(e.length,0)}),0)}(g);var S=a.geometry.attributes,v=S.color,C=S.status,w=0,y=0,b=h/e.length,z=c/p.height,x=b-z;g.forEach((function(t,e){var a,c=u;t.forEach((function(p,g){var S=t[g+1]||[],z=(0,r.Z)(S,1)[0],D=void 0===z?void 0:z,O=(0,r.Z)(p,2),M=O[0],A=O[1];null!=a&&a!==A&&(c=c===u?l:u);var B=(0,i.g)(A,d);if(null!=B&&f.showColor){var F=(0,o.g)(B.color),U=(0,r.Z)(F,3),_=U[0],k=U[1],Z=U[2];v.array[y]=_,v.array[y+1]=k,v.array[y+2]=Z}else{var T=c,R=(0,r.Z)(T,3),X=R[0],j=R[1],E=R[2];v.array[y]=X,v.array[y+1]=j,v.array[y+2]=E}y+=3,C.array[w]=n(M),C.array[w+1]=h-b*(e+1),C.array[w+2]=function(t){var e=t.nextX,a=t.currX,r=t.toClipSpace,n=t.alarms,o=n?n.expires:void 0;if(null!=o){var i=(0,s.g)(r,o);return null==e?i:Math.min((0,s.g)(r,e-a),i)}return null!=e?(0,s.g)(r,e-a):(0,s.g)(r,Date.now()-a)}({currX:M,nextX:D,toClipSpace:n,alarms:m}),C.array[w+3]=x,w+=4,a=A}))})),C.needsUpdate=!0,v.needsUpdate=!0},f=[0,0,0,1,1,0,0,1,1,0,1,1],p=function(t){var e=t.alarms,a=t.dataStreams,r=t.toClipSpace,i=t.bufferFactor,s=t.minBufferSize,h=t.thresholdOptions,c=t.thresholds,u=t.chartSize,l=new n.I,p=Math.max(s,(0,o.n)(a)*i);!function(t,e){t.setAttribute("position",new n.B(new Float32Array(f),2)),t.setAttribute("status",new n.b(new Float32Array(4*e),4,!1)),t.setAttribute("color",new n.b(new Uint8Array(3*e),3,!0))}(l,p);var m=new n.R({vertexShader:"\nprecision highp float;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nattribute vec4 status;\nattribute vec2 position;\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main() {\n  float width = status.z;\n  float height = status.w;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position.x * width + status.x, position.y * height + status.y, 0.0, 1.0);\n  vColor = color;\n}\n",fragmentShader:"\nprecision highp float;\nvarying vec3 vColor;\n\nvoid main() {\n  gl_FragColor = vec4(vColor, 1.0);\n}\n",side:n.D,transparent:!1}),g=new n.a(l,m,p);return d({dataStreams:a,mesh:g,toClipSpace:r,thresholds:c,thresholdOptions:h,chartSize:u,alarms:e}),g.frustumCulled=!1,g},m=function(t){var e=t.alarms,a=t.dataStreams,r=t.container,i=t.viewport,s=t.bufferFactor,h=t.minBufferSize,c=t.onUpdate,u=t.thresholdOptions,l=t.thresholds,d=t.chartSize,f=new n.S,m=(0,o.a)(i);return f.add(p({alarms:e,dataStreams:a,toClipSpace:m,bufferFactor:s,minBufferSize:h,thresholdOptions:u,thresholds:l,chartSize:d})),(0,o.c)({scene:f,viewport:i,container:r,toClipSpace:m,onUpdate:c})},g=function(t){var e=t.scene,a=t.alarms,r=t.dataStreams,n=t.minBufferSize,i=t.bufferFactor,s=t.viewport,h=t.container,c=t.onUpdate,u=t.chartSize,l=t.thresholdOptions,f=t.thresholds,p=t.hasDataChanged,g=t.hasAnnotationChanged,S=t.hasSizeChanged,v=e.scene.children[0],C=function(t){return t.geometry.attributes.status.array.length/4}(v)<(0,o.n)(r);return C||(0,o.b)(s,e.toClipSpace)?m({onUpdate:c,dataStreams:r,alarms:a,container:h,viewport:s,minBufferSize:n,bufferFactor:i,chartSize:u,thresholdOptions:l,thresholds:f}):(function(t){var e=t.alarms,a=t.statuses,r=t.dataStreams,n=t.toClipSpace,o=t.thresholdOptions,i=t.thresholds,s=t.chartSize,h=t.hasDataChanged,c=t.hasAnnotationChanged,u=t.hasSizeChanged;(h||c||u)&&d({dataStreams:r,mesh:a,toClipSpace:n,thresholds:i,thresholdOptions:o,chartSize:s,alarms:e})}({alarms:a,statuses:v,dataStreams:r,toClipSpace:e.toClipSpace,thresholdOptions:l,thresholds:f,chartSize:u,hasDataChanged:p,hasAnnotationChanged:g,hasSizeChanged:S}),e)}},1693:function(t,e,a){a.d(e,{C:function(){return r}});var r={width:100,height:100}},3141:function(t,e,a){a.d(e,{g:function(){return r}});var r=function(t,e){return Math.abs(t(new Date(e).getTime())-t(new Date(0).getTime()))}},3639:function(t,e,a){a.r(e),a.d(e,{single_colored_status:function(){return g}});var r=a(4942),n=a(5671),o=a(3144),i=a(8427),s=a(4231),h=a(775),c=a(1693),u=a(8858),l=a(6591),d=(a(8134),a(553),a(7411),a(2208),a(8828),a(5615),a(339),a(7142),a(7775),new Date(2e3,0,0)),f=new Date(2e3,0,1),p=f.getTime()-d.getTime(),m={x:d.getTime()+p/3,y:123},g=function(){function t(e){(0,n.Z)(this,t),(0,i.r)(this,e)}return(0,o.Z)(t,[{key:"componentDidLoad",value:function(){var t=this.el.querySelector("#test-container"),e=(0,h.c)({alarms:{expires:u.D},viewport:{start:d,end:f,yMin:0,yMax:h.H},dataStreams:[{id:"test-stream",name:"test-stream-name",color:"red",aggregates:(0,r.Z)({},u.D,[m]),data:[],resolution:u.D,dataType:l.D.NUMBER}],container:t,chartSize:c.C,minBufferSize:100,bufferFactor:2,thresholdOptions:{showColor:!1},thresholds:[]});s.w.addChartScene({manager:e});var a=t.getBoundingClientRect();s.w.setChartRect(e.id,Object.assign({density:1},a.toJSON()))}},{key:"render",value:function(){return(0,i.h)("sc-webgl-context",null,(0,i.h)("div",{id:"test-container",style:{width:"".concat(c.C.width,"px"),height:"".concat(c.C.height,"px")}}))}},{key:"el",get:function(){return(0,i.g)(this)}}]),t}()}}]);
//# sourceMappingURL=3639.eb9fea5a.chunk.js.map