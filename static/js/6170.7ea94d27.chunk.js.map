{"version":3,"file":"static/js/6170.7ea94d27.chunk.js","mappings":"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","sources":["../node_modules/@iot-app-kit/components/dist/esm/iot-resource-explorer.entry.js"],"sourcesContent":["import { r as registerInstance, h } from './index-1cec361c.js';\nimport { B as BranchReference } from './index-1a343b2d.js';\nimport { v as v4 } from './v4-fa4bb814.js';\nimport './constants-9d5458e0.js';\nimport './dataConstants-71f11842.js';\nimport './index-b3f1c3a1.js';\nimport './utils-0919edc8.js';\nimport './time-b684d8c5.js';\nimport './predicates-248e16b2.js';\nimport './number-3e8376bf.js';\nimport './bisector-ecf52045.js';\nimport './dataFilters-fa384f64.js';\nimport './index-c6c92ac7.js';\nimport './_commonjsHelpers-f9dc4873.js';\nimport './tslib.es6-ab527f17.js';\nimport './index-79c8c520.js';\n\nconst recursiveParseSitewiseAssetTree = (flattenTree, subTree, parentId) => {\n  subTree.forEach((node) => {\n    flattenTree.push(Object.assign(Object.assign({}, node.asset), { hasChildren: node.hierarchies.size > 0, parentId }));\n    node.hierarchies.forEach((hierarchy) => {\n      recursiveParseSitewiseAssetTree(flattenTree, hierarchy.children, node.asset.id);\n    });\n  });\n};\nconst parseSitewiseAssetTree = (tree) => {\n  const flattenTree = [];\n  recursiveParseSitewiseAssetTree(flattenTree, tree);\n  return flattenTree;\n};\n\nconst DEFAULT_COLUMNS = [\n  {\n    sortingField: 'name',\n    id: 'name',\n    header: 'Asset Name',\n    cell: ({ name }) => name,\n  },\n  {\n    sortingField: 'status',\n    id: 'status',\n    header: 'Status',\n    cell: ({ status }) => status === null || status === void 0 ? void 0 : status.state,\n  },\n  {\n    sortingField: 'creationDate',\n    id: 'creationDate',\n    header: 'Created',\n    cell: ({ creationDate }) => creationDate === null || creationDate === void 0 ? void 0 : creationDate.toUTCString(),\n  },\n  {\n    sortingField: 'lastUpdateDate',\n    id: 'lastUpdateDate',\n    header: 'Updated',\n    cell: ({ lastUpdateDate }) => lastUpdateDate === null || lastUpdateDate === void 0 ? void 0 : lastUpdateDate.toUTCString(),\n  },\n];\nconst IotResourceExplorer = class {\n  constructor(hostRef) {\n    registerInstance(this, hostRef);\n    this.columnDefinitions = DEFAULT_COLUMNS;\n    this.filterEnabled = true;\n    this.sortingEnabled = true;\n    this.paginationEnabled = true;\n    this.wrapLines = false;\n    this.widgetId = v4();\n    this.expanded = false;\n    this.items = [];\n    this.expandedItems = {};\n    this.errors = [];\n    this.defaults = {\n      selectionType: 'single',\n      loadingText: 'loading...',\n      filterText: {\n        placeholder: 'Filter by name',\n        empty: 'No assets found.',\n        noMatch: `We can't find a match.`,\n      },\n      empty: {\n        header: 'No assets',\n        description: `You don't have any asset.`,\n      },\n    };\n    this.expandNode = (node) => {\n      var _a;\n      (_a = node.hierarchies) === null || _a === void 0 ? void 0 : _a.forEach((hierarchy) => {\n        this.provider.expand(new BranchReference(node.id, hierarchy.id));\n      });\n    };\n  }\n  buildProvider() {\n    return this.query.build(this.widgetId);\n  }\n  componentWillLoad() {\n    this.provider = this.buildProvider();\n    this.provider.subscribe({\n      next: (data) => {\n        this.items = parseSitewiseAssetTree(data);\n      },\n      error: (err) => {\n        this.errors = err;\n      },\n    });\n  }\n  componentWillUnmount() {\n    this.provider.unsubscribe();\n  }\n  watchItems(newItems) {\n    if (this.expanded) {\n      const newExpandedItems = {};\n      newItems.forEach(({ id, hierarchies, hasChildren }) => {\n        if (!this.expandedItems[id] && hasChildren) {\n          hierarchies === null || hierarchies === void 0 ? void 0 : hierarchies.forEach((hierarchy) => {\n            this.provider.expand(new BranchReference(id, hierarchy.id));\n          });\n          newExpandedItems[id] = true;\n        }\n      });\n      this.expandedItems = Object.assign(Object.assign({}, this.expandedItems), newExpandedItems);\n    }\n  }\n  render() {\n    var _a;\n    const filtering = this.filterEnabled ? this.filterTexts || this.defaults.filterText : undefined;\n    const collectionOptions = {\n      columnDefinitions: this.columnDefinitions,\n      keyPropertyName: 'id',\n      parentKeyPropertyName: 'parentId',\n      selection: {\n        keepSelection: true,\n      },\n      sorting: {\n        defaultState: {\n          sortingColumn: {\n            sortingField: 'name',\n          },\n          isDescending: true,\n        },\n      },\n      filtering,\n    };\n    if (this.paginationEnabled) {\n      collectionOptions.pagination = { pageSize: 20 };\n    }\n    let empty = this.defaults.empty;\n    if (this.empty) {\n      empty = this.empty;\n    }\n    if (this.errors.length > 0) {\n      // TODO: Make use of all the errors\n      empty = { header: 'Error', description: (_a = this.errors[this.errors.length - 1]) === null || _a === void 0 ? void 0 : _a.msg };\n    }\n    return (h(\"iot-tree-table\", { items: this.items, collectionOptions: collectionOptions, columnDefinitions: this.columnDefinitions, selectionType: this.selectionType || this.defaults.selectionType, loadingText: this.loadingText || this.defaults.loadingText, filterPlaceholder: filtering === null || filtering === void 0 ? void 0 : filtering.placeholder, onExpandChildren: this.expandNode, onSelectionChange: this.onSelectionChange, empty: empty, sortingDisabled: !this.sortingEnabled, wrapLines: this.wrapLines, expanded: this.expanded }));\n  }\n  static get watchers() { return {\n    \"items\": [\"watchItems\"]\n  }; }\n};\n\nexport { IotResourceExplorer as iot_resource_explorer };\n"],"names":["recursiveParseSitewiseAssetTree","flattenTree","subTree","parentId","forEach","node","push","Object","assign","asset","hasChildren","hierarchies","size","hierarchy","children","id","parseSitewiseAssetTree","tree","DEFAULT_COLUMNS","sortingField","header","cell","_ref","name","_ref2","status","state","_ref3","creationDate","toUTCString","_ref4","lastUpdateDate","IotResourceExplorer","hostRef","_this","_classCallCheck","registerInstance","this","columnDefinitions","filterEnabled","sortingEnabled","paginationEnabled","wrapLines","widgetId","v4","expanded","items","expandedItems","errors","defaults","selectionType","loadingText","filterText","placeholder","empty","noMatch","description","expandNode","_a","provider","expand","BranchReference","_createClass","key","value","query","build","_this2","buildProvider","subscribe","next","data","error","err","unsubscribe","newItems","_this3","newExpandedItems","_ref5","filtering","filterTexts","undefined","collectionOptions","keyPropertyName","parentKeyPropertyName","selection","keepSelection","sorting","defaultState","sortingColumn","isDescending","pagination","pageSize","length","msg","h","filterPlaceholder","onExpandChildren","onSelectionChange","sortingDisabled","get"],"sourceRoot":""}